REPORT ZSH_OS_BILL.
TABLES: ZSH_OS_REGISTER,
        ZSH_OS_ADD,
        ZSH_OS_BILL,
        ZSH_OS_BILL_H,
        ZSH_OS_CAT.

PARAMETERS: P_EMAIL TYPE ZSH_OS_REGISTER-EMAIL.

DATA: WA_REG  TYPE ZSH_OS_REGISTER,
      WA_ADDR TYPE ZSH_OS_ADD,
      WA_BILL TYPE  ZSH_OS_BILL_H.

DATA: IT_BD TYPE ZSH_TT_BILL,
      WA_BD TYPE ZSH_STR_BILL.

DATA: V_FM TYPE RS38L_FNAM.

DATA: CONTROL        TYPE SSFCTRLOP, "Smart Forms: Control structure
      OUTPUT_OPTIONS TYPE SSFCOMPOP. "Smart Composer (transfer) options


SELECT SINGLE * FROM ZSH_OS_REGISTER INTO WA_REG WHERE EMAIL = P_EMAIL.
SELECT SINGLE * FROM ZSH_OS_ADD INTO WA_ADDR WHERE EMAIL = P_EMAIL.
SELECT SINGLE * FROM ZSH_OS_BILL_H INTO WA_BILL WHERE EMAIL = P_EMAIL.
SELECT * FROM ZSH_OS_BILL INTO TABLE IT_BD WHERE EMAIL = P_EMAIL.

CONTROL-PREVIEW = 'X'.
CONTROL-NO_DIALOG = 'X'.
OUTPUT_OPTIONS-TDDEST = 'LP01'.




CALL FUNCTION '/1BCDWB/SF00000540'
  EXPORTING
*   ARCHIVE_INDEX              =
*   ARCHIVE_INDEX_TAB          =
*   ARCHIVE_PARAMETERS         =
   CONTROL_PARAMETERS         = CONTROL
*   MAIL_APPL_OBJ              =
*   MAIL_RECIPIENT             =
*   MAIL_SENDER                =
   OUTPUT_OPTIONS             = OUTPUT_OPTIONS
   USER_SETTINGS              = ' '
    WA_REG  = WA_REG
    WA_ADDR = WA_ADDR
    WA_BILL = WA_BILL
    IT_BD   = IT_BD
* IMPORTING
*   DOCUMENT_OUTPUT_INFO       =
*   JOB_OUTPUT_INFO            =
*   JOB_OUTPUT_OPTIONS         =
* EXCEPTIONS
*   FORMATTING_ERROR           = 1
*   INTERNAL_ERROR             = 2
*   SEND_ERROR                 = 3
*   USER_CANCELED              = 4
*   OTHERS  = 5
  .
IF SY-SUBRC <> 0.
* Implement suitable error handling here
ENDIF.
